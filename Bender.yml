package:
  name: i3c-core
  description: "Open-source I3C controller core (MIPI HCI compliant)"
  authors:
    - "CHIPS Alliance"
    - "Antmicro"

export_include_dirs:
  # i3c-core include directories
  - src
  - src/libs
  # caliptra-rtl include directories
  - third_party/caliptra-rtl/src/caliptra_prim/rtl
  - third_party/caliptra-rtl/src/caliptra_prim_generic/rtl
  - third_party/caliptra-rtl/src/libs/rtl
  - third_party/caliptra-rtl/src/axi/rtl

sources:
  ################################################################
  # Packages (must be compiled first)
  ################################################################
  # caliptra-rtl packages
  - third_party/caliptra-rtl/src/caliptra_prim/rtl/caliptra_prim_pkg.sv
  - third_party/caliptra-rtl/src/caliptra_prim/rtl/caliptra_prim_util_pkg.sv
  - third_party/caliptra-rtl/src/caliptra_prim/rtl/caliptra_prim_count_pkg.sv
  - third_party/caliptra-rtl/src/libs/rtl/ahb_defines_pkg.sv
  - third_party/caliptra-rtl/src/axi/rtl/i3ccore_axi_pkg.sv
  # i3c-core packages
  - src/libs/mem/prim_ram_1p_pkg_i3ccore.sv
  - src/csr/I3CCSR_pkg.sv
  - src/ctrl/controller_pkg.sv
  - src/i3c_pkg.sv

  ################################################################
  # caliptra-rtl primitives
  ################################################################
  - third_party/caliptra-rtl/src/caliptra_prim_generic/rtl/caliptra_prim_generic_flop.sv
  - third_party/caliptra-rtl/src/caliptra_prim/rtl/caliptra_prim_flop.sv
  - third_party/caliptra-rtl/src/caliptra_prim/rtl/caliptra_prim_flop_2sync.sv
  - third_party/caliptra-rtl/src/caliptra_prim/rtl/caliptra_prim_assert.sv
  - third_party/caliptra-rtl/src/caliptra_prim/rtl/caliptra_prim_fifo_sync_cnt.sv
  - third_party/caliptra-rtl/src/caliptra_prim/rtl/caliptra_prim_fifo_sync.sv

  ################################################################
  # caliptra-rtl library modules
  ################################################################
  - third_party/caliptra-rtl/src/libs/rtl/ahb_slv_sif.sv
  - third_party/caliptra-rtl/src/axi/rtl/axi_if.sv
  - third_party/caliptra-rtl/src/axi/rtl/axi_addr.v
  - third_party/caliptra-rtl/src/libs/rtl/skidbuffer.v

  ################################################################
  # i3c-core memory primitives
  ################################################################
  - src/libs/mem/prim_generic_ram_1p_i3ccore.sv
  - src/libs/mem/prim_ram_1p_adv_i3ccore.sv
  - src/libs/mem/prim_ram_1p_i3ccore.sv

  ################################################################
  # i3c-core PHY
  ################################################################
  - src/phy/buf_pp.sv
  - src/phy/bufs.sv
  - src/phy/i3c_phy.sv

  ################################################################
  # i3c-core CSR
  ################################################################
  - src/csr/I3CCSR.sv
  - src/interrupt.sv

  ################################################################
  # i3c-core AXI subordinate library
  ################################################################
  - src/libs/axi_sub/i3c_axi_sub_arb.sv
  - src/libs/axi_sub/i3c_axi_sub_rd.sv
  - src/libs/axi_sub/i3c_axi_sub.sv
  - src/libs/axi_sub/i3c_axi_sub_wr.sv

  ################################################################
  # i3c-core HCI - Queues
  ################################################################
  - src/hci/queues/read_queue.sv
  - src/hci/queues/write_queue.sv

  ################################################################
  # i3c-core HCI - Bus adapters
  ################################################################
  - src/hci/ahb_if.sv
  - src/hci/axi_adapter.sv
  - src/hci/apb_adapter.sv
  - src/hci/axi_lite_adapter.sv

  ################################################################
  # i3c-core HCI - Core
  ################################################################
  - src/hci/dxt.sv
  - src/hci/tti.sv
  - src/hci/queues.sv
  - src/hci/hci.sv
  - src/hci/csri.sv

  ################################################################
  # i3c-core Controller - Utilities
  ################################################################
  - src/ctrl/width_converter_8toN.sv
  - src/ctrl/width_converter_Nto8.sv

  ################################################################
  # i3c-core Recovery
  ################################################################
  - src/recovery/recovery_pec.sv
  - src/recovery/recovery_receiver.sv
  - src/recovery/recovery_transmitter.sv
  - src/recovery/recovery_executor.sv
  - src/recovery/recovery_handler.sv

  ################################################################
  # i3c-core Controller - Bus logic
  ################################################################
  - src/ctrl/bus_monitor.sv
  - src/ctrl/ibi.sv
  - src/ctrl/bus_tx.sv
  - src/ctrl/bus_tx_flow.sv
  - src/ctrl/bus_rx_flow.sv
  - src/ctrl/bus_timers.sv
  - src/ctrl/target_reset_detector.sv
  - src/ctrl/i3c_bus_monitor.sv
  - src/ctrl/ccc_entdaa.sv
  - src/ctrl/ccc.sv
  - src/ctrl/configuration.sv
  - src/ctrl/edge_detector.sv

  ################################################################
  # i3c-core Controller - Descriptors
  ################################################################
  - src/ctrl/descriptor_rx.sv
  - src/ctrl/descriptor_tx.sv
  - src/ctrl/descriptor_ibi.sv

  ################################################################
  # i3c-core Controller - FSMs
  ################################################################
  - src/ctrl/i3ccore_i2c_controller_fsm.sv
  - src/ctrl/i3ccore_i2c_target_fsm.sv
  - src/ctrl/i3c_controller_fsm.sv
  - src/ctrl/i3c_target_fsm.sv

  ################################################################
  # i3c-core Controller - Flow control
  ################################################################
  - src/ctrl/flow_active.sv
  - src/ctrl/flow_standby_i2c.sv
  - src/ctrl/controller_standby_i2c.sv
  - src/ctrl/controller_standby_i3c.sv
  - src/ctrl/controller_active.sv
  - src/ctrl/controller_standby.sv
  - src/ctrl/controller.sv
  - src/ctrl/stable_high_detector.sv

  ################################################################
  # i3c-core Top-level modules
  ################################################################
  - src/i3c.sv
  - src/i3c_wrapper.sv
